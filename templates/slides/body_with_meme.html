{% extends "base.html" %}

{% block extra_styles %}
<style>
    /* ============================================
       PREMIUM LAYOUT - Million Follower Quality
       ============================================ */

    .premium-layout {
        display: flex;
        flex-direction: column;
        height: 100%;
        padding: 0;
        box-sizing: border-box;
    }

    /* === TEXT-FIRST LAYOUT (Image at bottom, takes ~55% of space) === */
    .premium-layout.text-first {
        padding: 80px 80px 50px 80px;
    }

    .premium-layout.text-first .text-section {
        flex: 0 0 auto;
        margin-bottom: 50px;
    }

    .premium-layout.text-first .image-section {
        flex: 1;
        min-height: 450px;
    }

    /* === IMAGE-FIRST LAYOUT (Image at top, ~60% space) === */
    .premium-layout.image-first {
        padding: 50px 80px 80px 80px;
    }

    .premium-layout.image-first .image-section {
        flex: 1;
        min-height: 500px;
        margin-bottom: 50px;
    }

    .premium-layout.image-first .text-section {
        flex: 0 0 auto;
    }

    /* === SIDE-BY-SIDE LAYOUT (50/50 split) === */
    .premium-layout.side-by-side {
        flex-direction: row;
        padding: 80px;
        gap: 60px;
        align-items: center;
    }

    .premium-layout.side-by-side .text-section {
        flex: 1;
        display: flex;
        flex-direction: column;
        justify-content: center;
    }

    .premium-layout.side-by-side .image-section {
        flex: 1;
        height: 100%;
        display: flex;
        align-items: center;
    }

    /* === FULL BLEED IMAGE (Image covers entire slide) === */
    .premium-layout.full-bleed {
        padding: 0;
        position: relative;
    }

    .premium-layout.full-bleed .image-section {
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        z-index: 1;
    }

    .premium-layout.full-bleed .image-section::after {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: linear-gradient(
            180deg,
            rgba(0, 0, 0, 0.6) 0%,
            rgba(0, 0, 0, 0.2) 35%,
            rgba(0, 0, 0, 0.2) 65%,
            rgba(0, 0, 0, 0.75) 100%
        );
        z-index: 2;
    }

    .premium-layout.full-bleed .text-section {
        position: relative;
        z-index: 10;
        height: 100%;
        display: flex;
        flex-direction: column;
        justify-content: center;
        padding: 100px;
    }

    .premium-layout.full-bleed .body-text {
        color: #FFFFFF !important;
        text-shadow: 0 4px 30px rgba(0, 0, 0, 0.5);
    }

    .premium-layout.full-bleed .highlight {
        background: rgba(255, 217, 61, 0.95);
        color: #000;
        text-shadow: none;
    }

    /* === PREMIUM TEXT STYLING === */
    .body-text {
        font-size: 46px;
        font-weight: 700;
        line-height: 1.35;
        color: var(--text-primary);
        text-align: left;
        letter-spacing: -0.025em;
    }

    /* Adaptive text sizing */
    .body-text.compact {
        font-size: 52px;
        line-height: 1.25;
    }

    .body-text.medium {
        font-size: 44px;
        line-height: 1.35;
    }

    .body-text.long {
        font-size: 38px;
        line-height: 1.4;
    }

    .body-text.very-long {
        font-size: 34px;
        line-height: 1.45;
    }

    /* === PREMIUM IMAGE CONTAINER === */
    .image-container {
        width: 100%;
        height: 100%;
        border-radius: 28px;
        overflow: hidden;
        background: linear-gradient(135deg, rgba(255,255,255,0.1) 0%, rgba(255,255,255,0.05) 100%);
        box-shadow:
            0 25px 80px rgba(0, 0, 0, 0.4),
            0 10px 30px rgba(0, 0, 0, 0.2),
            inset 0 1px 0 rgba(255, 255, 255, 0.1);
    }

    .image-container img {
        width: 100%;
        height: 100%;
        object-fit: cover;
        display: block;
    }

    /* Full-bleed has no border radius */
    .premium-layout.full-bleed .image-container {
        border-radius: 0;
        box-shadow: none;
        background: none;
    }

    /* === PREMIUM HIGHLIGHT STYLING === */
    /* Professional style: Bold text only (like @theeconomicinfluence.id) */
    .highlight {
        font-weight: 800;
        color: var(--text-primary, #fff);
        background: none;
        padding: 0;
        display: inline;
    }

    /* Optional: Subtle accent for key words */
    .highlight-accent {
        font-weight: 800;
        color: var(--accent, #FFD93D);
        background: none;
        padding: 0;
        display: inline;
    }

    /* === SLIDE NUMBER BADGE === */
    .slide-badge {
        position: absolute;
        top: 45px;
        right: 55px;
        font-size: 14px;
        font-weight: 700;
        color: var(--text-secondary);
        opacity: 0.35;
        letter-spacing: 0.1em;
        z-index: 100;
    }

    .premium-layout.full-bleed .slide-badge {
        color: rgba(255, 255, 255, 0.5);
    }
</style>
{% endblock %}

{% block content %}
{% if show_slide_badge %}
<div class="slide-badge">{{ slide_number }}/{{ total_slides }}</div>
{% endif %}

{% set layout_class = 'text-first' %}
{% if meme_position == 'top' %}
    {% set layout_class = 'image-first' %}
{% elif meme_position in ['left', 'right'] %}
    {% set layout_class = 'side-by-side' %}
{% elif meme_position == 'full' %}
    {% set layout_class = 'full-bleed' %}
{% endif %}

<div class="premium-layout {{ layout_class }}">

    {% if layout_class == 'full-bleed' %}
        <!-- Full bleed: image covers entire slide -->
        <div class="image-section">
            <div class="image-container">
                <img src="{{ meme_path }}" alt="Visual">
            </div>
        </div>
        <div class="text-section">
            <p class="body-text {{ text_size_class|default('') }}">
                {{ formatted_text|safe }}
            </p>
        </div>

    {% elif layout_class == 'image-first' %}
        <!-- Large image on top -->
        <div class="image-section">
            <div class="image-container">
                <img src="{{ meme_path }}" alt="Visual">
            </div>
        </div>
        <div class="text-section">
            <p class="body-text {{ text_size_class|default('') }}">
                {{ formatted_text|safe }}
            </p>
        </div>

    {% elif layout_class == 'side-by-side' %}
        <!-- Side by side 50/50 -->
        {% if meme_position == 'left' %}
        <div class="image-section">
            <div class="image-container">
                <img src="{{ meme_path }}" alt="Visual">
            </div>
        </div>
        <div class="text-section">
            <p class="body-text {{ text_size_class|default('') }}">
                {{ formatted_text|safe }}
            </p>
        </div>
        {% else %}
        <div class="text-section">
            <p class="body-text {{ text_size_class|default('') }}">
                {{ formatted_text|safe }}
            </p>
        </div>
        <div class="image-section">
            <div class="image-container">
                <img src="{{ meme_path }}" alt="Visual">
            </div>
        </div>
        {% endif %}

    {% else %}
        <!-- Text first (default) - large image at bottom -->
        <div class="text-section">
            <p class="body-text {{ text_size_class|default('') }}">
                {{ formatted_text|safe }}
            </p>
        </div>
        <div class="image-section">
            <div class="image-container">
                <img src="{{ meme_path }}" alt="Visual">
            </div>
        </div>
    {% endif %}

</div>
{% endblock %}
